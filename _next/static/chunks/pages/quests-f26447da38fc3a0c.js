(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1738],{1438:function(e,t,n){"use strict";n.d(t,{Qg:function(){return a.Q}});var a=n(6880),s=n(1581),i=n(4216);new s.Yd(i.i)},6258:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/quests",function(){return n(4098)}])},7309:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});let a={soonabotRaceAddr:"0xC587021041Fd1f5e15a24bdCE3F37DddB359b8D6",soonabotsAddr:"0x2f5C574ddF275b4cDfAE26fE8e75621c4B7E106e",soonabotsStakeAddr:"0x83a612E70A505012F7E38e4b8f37C806f2ef7Aa8",iotabotsAddr:"0xb5A53615170e4684E488C9E1c641aB9dDC307489",iotabotsGameAddr:"0x3CE8aB86dED969004102caB650060373e04A0448",eggsAddr:"0xdFCF738225F6508F7A664c3c7D236432501e16d4",eggsBurnAddr:"0x08c399d67d6A536b21d8D4CAd2F703fFd3e0aF58",nftMarketAddr:"0x390f1A9056121bf3087010Ea3804c920f3AE03c9",questsAddr:"0x7Db4a0de77b13780b4eFd3bAe634A5bAe57F611f"}},5416:function(e,t,n){"use strict";n.r(t);var a=n(5893);n(7294);var s=n(6886),i=n(2349);let r=e=>{let{quests:t,onSolve:n}=e;return(0,a.jsx)(s.ZP,{container:!0,spacing:4,children:t&&t.length>0&&t.map(e=>(0,a.jsx)(s.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,a.jsx)(i.default,{quest:e,onSolve:n})},e.id))})};t.default=r},4098:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var a=n(5893),s=n(9008),i=n.n(s),r=n(7294),d=n(6902),p=n(5582),u=n(5861),o=n(7357),l=n(8494),y=n(3321),m=n(4687),c=n(5416),T=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"_adminAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"admin","type":"address"}],"name":"AdminLoggedIn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"admin","type":"address"}],"name":"AdminLoggedOut","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"admin","type":"address"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"string","name":"ipfsImageHash","type":"string"}],"name":"AdminRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"questId","type":"uint256"},{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"QuestCompleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"questId","type":"uint256"},{"indexed":false,"internalType":"string","name":"description","type":"string"},{"indexed":false,"internalType":"uint256","name":"points","type":"uint256"},{"indexed":false,"internalType":"address","name":"requiredTokenAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"requiredTokenAmount","type":"uint256"}],"name":"QuestCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"questId","type":"uint256"}],"name":"QuestDeleted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"questId","type":"uint256"},{"indexed":false,"internalType":"string","name":"description","type":"string"},{"indexed":false,"internalType":"uint256","name":"points","type":"uint256"},{"indexed":false,"internalType":"address","name":"requiredTokenAddress","type":"address"},{"indexed":false,"internalType":"uint256","name":"requiredTokenAmount","type":"uint256"},{"indexed":false,"internalType":"bool","name":"active","type":"bool"}],"name":"QuestUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"UserLoggedIn","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"}],"name":"UserLoggedOut","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"string","name":"name","type":"string"},{"indexed":false,"internalType":"string","name":"ipfsImageHash","type":"string"}],"name":"UserRegistered","type":"event"},{"inputs":[{"internalType":"uint256","name":"questId","type":"uint256"}],"name":"canSolveQuest","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"checkIsAdminLogged","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"checkIsUserLogged","outputs":[{"internalType":"bool","name":"","type":"bool"},{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"questId","type":"uint256"}],"name":"completeQuest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"points","type":"uint256"},{"internalType":"address","name":"requiredTokenAddress","type":"address"},{"internalType":"uint256","name":"requiredTokenAmount","type":"uint256"}],"name":"createQuest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"questId","type":"uint256"}],"name":"deleteQuest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"eggsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"getAdminBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTop10Players","outputs":[{"components":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"points","type":"uint256"}],"internalType":"struct Quests.Player[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"iotabotsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"leaderboard","outputs":[{"internalType":"address","name":"user","type":"address"},{"internalType":"uint256","name":"points","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"_password","type":"string"}],"name":"loginAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"_password","type":"string"}],"name":"loginUser","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"logoutAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"}],"name":"logoutUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"nextQuestId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"quests","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"points","type":"uint256"},{"internalType":"address","name":"requiredTokenAddress","type":"address"},{"internalType":"uint256","name":"requiredTokenAmount","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_password","type":"string"},{"internalType":"string","name":"_ipfsImageHash","type":"string"}],"name":"registerAdmin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_address","type":"address"},{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_password","type":"string"},{"internalType":"string","name":"_ipfsImageHash","type":"string"}],"name":"registerUser","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"questId","type":"uint256"},{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"points","type":"uint256"},{"internalType":"address","name":"requiredTokenAddress","type":"address"},{"internalType":"uint256","name":"requiredTokenAmount","type":"uint256"},{"internalType":"bool","name":"active","type":"bool"}],"name":"updateQuest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userPoints","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userQuestCompletion","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),b=JSON.parse('{"Mt":[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]}'),f=n(7309),g=n(1438),x=n(6076);let v={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,pt:2,px:4,pb:3};function A(){let{library:e,account:t}=(0,m.Ge)(),[n,s]=(0,r.useState)([]),[A,w]=(0,r.useState)([]),[h,q]=(0,r.useState)(0),[M,_]=r.useState(!1);console.log("quests",n),(0,r.useEffect)(()=>{e&&t&&k()},[e,t]);let k=async()=>{if(!e)return;let n=new g.Qg(e.provider),a=n.getSigner(),i=new x.CH(f.M.questsAddr,T.Mt,a);try{let e=await i.userPoints(t);q(e.toNumber())}catch(e){console.log("error userPoints",e)}try{let e=await i.nextQuestId(),n=[];for(let s=0;s<e;s++){let e=await i.quests(s),r=!1;try{let e=await i.canSolveQuest(s);console.log("data",e),r=e}catch(e){console.log("error canSolveQuest",e)}let d=!1;try{let n=new x.CH(e.requiredTokenAddress,b.Mt,a),s=await n.balanceOf(t);console.log("requiredTokenAmount",e.requiredTokenAmount.toNumber()),console.log("balance",s),console.log("balance toNumber",null==s?void 0:s.toNumber()),d=(null==s?void 0:s.toNumber())||-1}catch(e){console.log("error balance",e)}console.log("questData",e.description,": ",r,": ",d);let p={id:e.id,description:e.description,points:e.points,requiredTokenAddress:e.requiredTokenAddress,requiredTokenAmount:e.requiredTokenAmount,active:e.active,solved:!1,userCanSolve:r,balance:-1};console.log("quest",p),n.push(p)}s(n)}catch(e){console.log("error",e)}},Q=async t=>{if(!e)return;let n=new g.Qg(e.provider),a=n.getSigner(),s=new x.CH(f.M.questsAddr,T.Mt,a);try{let e=await s.completeQuest(t,{gasLimit:1e6});console.log("Solve quest ".concat(t));let n=await e.wait();console.log("recipe",n);for(let e=0;e<n.events.length;e++){let t=n.events[e];"QuestCompleted"===t.event&&(console.log("QuestCompleted",t),_(!0))}}catch(e){console.log("error",e)}},j=()=>{_(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Quests"}),(0,a.jsx)("meta",{name:"description",content:"Join the Treasures of Shimmer. Do quests and climb the leaderboard!"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsxs)(d.Z,{children:[(0,a.jsxs)(p.Z,{maxWidth:"md",children:[(0,a.jsx)(u.Z,{variant:"h1",children:"Quests"}),(0,a.jsxs)(u.Z,{variant:"h3",children:["Points: ",h]}),(0,a.jsx)(p.Z,{children:(0,a.jsx)(o.Z,{sx:{marginTop:4},children:n.length<=0?"Loading quests...":(0,a.jsx)(c.default,{quests:n||[],onSolve:Q})})})]}),(0,a.jsx)(l.Z,{open:M,onClose:j,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:(0,a.jsxs)(o.Z,{sx:{...v,width:400},children:[(0,a.jsx)("h2",{id:"parent-modal-title",children:"Quest Solved!"}),(0,a.jsx)("p",{id:"parent-modal-description",children:"Awesome, you just solved a quest!"}),(0,a.jsx)(y.Z,{onClick:j,children:"Okay!"})]})})]})]})}}},function(e){e.O(0,[5861,7739,7294,8115,8231,8494,8389,6719,7851,6902,2349,9774,2888,179],function(){return e(e.s=6258)}),_N_E=e.O()}]);